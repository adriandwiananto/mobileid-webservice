{"filter":false,"title":"db.class","tooltip":"/lib/db.class","undoManager":{"mark":10,"position":10,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":1}},"text":"<"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":1},"end":{"row":0,"column":2}},"text":"?"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":2},"end":{"row":0,"column":3}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":3},"end":{"row":0,"column":4}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":4},"end":{"row":0,"column":5}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":5},"end":{"row":1,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":1,"column":0},"end":{"row":2,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":0},"end":{"row":2,"column":1}},"text":"?"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":1},"end":{"row":2,"column":2}},"text":">"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":1,"column":0},"end":{"row":1,"column":14}},"text":"class UserDB {"},{"action":"insertText","range":{"start":{"row":1,"column":14},"end":{"row":2,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":2,"column":0},"end":{"row":77,"column":0}},"lines":["\t","    public function __construct()","\t{","        require_once('../rb.php');","\t}","\t","\tpublic function prepareDB($dbpath) {","\t\tif(file_exists($dbpath)) {","\t\t\tR::setup('sqlite:'.$dbpath);","\t\t}","\t\telse","\t\t{","\t\t\tthrow new exception(\"Could not locate file '$dbpath'\");","\t\t}","\t}","\t","\tpublic function loadDB($table,$index) {","\t\treturn $this->data = R::load($table,$index);","\t}","}","","class DocsignDB extends UserDB {","","\tpublic static $tablename = 'docsigning';","","\tpublic function getUserDocsignDB($index) {","\t    return $this->loadDB(self::$tablename,$index); ","\t}","\t","\tpublic function updateUserDocsignDB($index,$data) {","\t\t$doc = R::load(self::$tablename,$index);","\t\t$doc=$data;","\t\t$id = R::store( $doc );","\t}","\t","\tpublic function newentryUserDocsignDB($index,$data) {","\t\t$doc = R::dispense(self::$tablename);","\t\t$doc=$data;","\t\t$id = R::store( $doc );","\t}","}","","class UserClassDB extends UserDB {","\t// Kelas untuk mengakses dan memanipulasi database User Class (permission)","\t// Kategori kelas = 1:legal; 2:pemilik identitas/penandatangan.","\t// Contoh penggunaan","","\t// $id_number=\"1231230509890001\";","\t// $dbpath = '../database/'.$id_number.'.s3db';","\t// $user = new UserClassDB;","\t// $user->prepareDB($dbpath);","\t// $user->setUserclass($id_number,1);","\t// $data = $user->getUserclass();","\t// var_dump($data);","\t","\tpublic static $tablename = 'userclass';","\t//parameter kelas user hanya boleh 1.","\tpublic static $index = '1';","\t","\tpublic function setUserclass($user_id,$status) {","\t\t//selalu menimpa entry 1","\t\t$this->class = R::load(self::$tablename,self::$index);","\t\t","\t\t//untuk mengecek, apakah tabel ada","\t\t//if (!$this->class->id) echo \"kelas belum ada\";","\t\t//else echo \"kelas sudah ada dengan status \".$this->class->classtype;","","\t\t$this->class->userid = $user_id;","\t\t$this->class->classtype = $status;","\t\t$id = R::store( $this->class );","\t}","\t","\tpublic function getUserclass() {","\t    return $this->loadDB(self::$tablename,self::$index);","\t}"]},{"action":"insertText","range":{"start":{"row":77,"column":0},"end":{"row":77,"column":1}},"text":"}"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":77,"column":1},"end":{"row":78,"column":0}},"text":"\n"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":78,"column":0},"end":{"row":78,"column":0},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1414763956678,"hash":"16d1c4dd5b8f5bd18f608c049023ecbdf6417f03"}